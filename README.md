
## About the Handset Assistant for iOS

This project contains the source code for buidling the handset assistant framework for iOS. 

This is a minimal implementation, written in Swift that gathers parameters from iOS devices and submits them as HuqDeviceInformationEvents.

The Framework is compiled as a binary and distributed via the Swift Package Manager.

This project also contains the .podfile for distributing the library via Cocoapods

### Getting Started

Edit the project is using XCode. The SampleApplication integrates the Framework, use this target to test changes made to the framework code. You should be sure to test the code on a physical device for the most representative results. It can be useful to use a proxy to check that the data is being submitted correctly, for example [mitmproxy](https://mitmproxy.org)

### Build and test the binary
Run `./build_framework.sh` to build the Framework locally.

### Publishing to Cocoapods
The `COCOAPODS_TRUNK_TOKEN` is defined as one of the repository secrets.

This token can be regenerated if required. You need to be set up with Cocoapods on your workstation and then follow [these instructions](https://guides.cocoapods.org/making/getting-setup-with-trunk
) to set up with trunk 

The session token should be generated by running 

```
pod trunk register machine@huq.io 'Huq Machine' 
--description='Auto Deployment'
```

You will need to have access to the machine@huq.io email address to confirm your session.

Once your session is authorised, you can pull the token using the following command: `grep -A2 'trunk.cocoapods.org' ~/.netrc`

You will see something like:

```
machine trunk.cocoapods.org
  login isambard@huq.io
  password abcde1234458c8f941a1
```

The token is displayed in the password field.
